<!--
author: W3layouts
author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE html>
<html lang="en"
xmlns:th="http://www.thymeleaf.org">
<head>
<title>Green Collar</title>
<!-- for-mobile-apps -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="" />

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" 
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

        <link href="../css/style.css" rel="stylesheet">

<!-- css files -->
<link href="css/css_slider.css" type="text/css" rel="stylesheet"
	media="all">
<!-- slider css -->
<link href="css/style.css" rel='stylesheet' type='text/css' />
<!-- custom css -->
<link href="css/font-awesome.min.css" rel="stylesheet">
<!-- fontawesome css -->
<!-- //css files -->


</head>
    <body>
    <div th:insert="fragments/default.html :: header"> </div>
    
    <section class="blog py-5">
	<div class="container py-md-3">
    <div class="row" style="margin: 0px;">


    <div class="col-md-6 ">
        <div class="card my-5">
            <div class="row" style="margin: 0px;">
                <div class=" col-sm-12 white " style="height: 200px; padding:0px">
                    <div class="profileGreen" style="height: 150px">
                        <div class="transparent text-white d-flex justify-content-center align-items-center pt-4 " style="height: 200px" >
                            <div class="black text-white d-flex justify-content-center align-items-center p-4 " style="height: 150px; width: 150px; border-radius: 150px" >
                                <h1 class="font-weight-bold" style="font-family: 'roboto','lato', sans-serif; font-size: 100px!important" th:text=${initial}></h1>
                            </div>
                        
                        </div>
                    </div>
                </div>
            </div>
            <div class="row  d-flex justify-content-center align-items-center">
                <div class="col-sm-12 d-flex justify-content-center align-items-center px-5 py-0 m-0" style="padding: 0px;">
                    <div class="row">
                        <div class="col-sm-12">

                            <h4 class="mx-5 font-weight-bold" th:text=${user.firstname}>
                            </h4><span class="mx-5 font-weight-bold" th:text=${user.lastname}></span>
                        </div>
                    </div>
                </div>
                <div class="row mt-5">
                    <div class="col-sm-12">
                        <div class="col-sm-12  ">
                            <table class="table table-hover ">
                                <thead class="grey-text">
                                    <tr  >
                                        <th  class="font-weight-bold">Profile</th>
<!--                                        <th  class="font-weight-bold"><span class="float-right"><a data-target="#exampleModalCenter" data-toggle="modal">Edit<i class="fa fa-edit ml-1"></i></a></span></th>-->
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="font-weight-bold">Signed in as:</td>
                                        <td class=""><span class="float-right" th:text=${email}></span></td>
                                    </tr>
                                   
                                    <tr>
                                        <td class="font-weight-bold">Mobile:</td>
                                        <td class=""><span class="float-right" th:text=${user.phonenumber}></span></td>
                                    </tr>
                                    
                                    <tr>
                                        <td class="font-weight-bold">State:</td>
                                        <td class=""><span class="float-right" th:text=${user.state}></span></td>
                                    </tr>
                         
<!--                                    <tr>
                                        <td class="font-weight-bold">Change Password</td>
                                        <td class="font-weight-bold"><span class="float-right"><a data-target="#ModalCenter2" data-toggle="modal"><i class="fa fa-edit ml-1"></i></a></span></td>
                                    </tr>-->
                                </tbody>
                            </table>
                            <div class="mb-3">
                             <button type="button" class="btn btn-success">Change Password</button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
            <div class="col-md-1">
            </div>
            <div class="col-md-5 my-5" th:if="${livestock != null}">
            <div>
        <h4>Your Livestock</h4>
        <div class="table-responsive">

                
              <table id="mytable" class="table table-bordered table-striped ">
                   
                   <thead>
                   
                   <th>id</th>
                    <th>Name</th>
                     <th>First Pay</th>
                      <th>Second Pay</th>
                       <th>Third Pay</th>
                   </thead>
    <tbody>
    
    <tr>
    <td th:text="${livestock.id}" />
    <td th:text="${livestock.name}"/>
    <td th:text="${livestock.firstPay}" />
    <td th:text="${livestock.secondPay}" />
    <td th:text="${livestock.thirdPay}" />
    <td><form >
  <script src="https://js.paystack.co/v1/inline.js"></script>
</form>
    </td>
    
    </tr>
    </tbody>
    </table>
    </div>
    </div>
    
    
    <div class=mt-5 th:if="${livestock != null}">
        <h4>Due Payment</h4>
        <div class="table-responsive">

                
              <table id="mytable" class="table table-bordered table-striped ">
                   
                   <thead>
                   
                   <th>id</th>
                    <th>Livestock</th>
                     <th>Next Pay</th>
                       <th>Pay</th>
                   </thead>
    <tbody>
    
    <tr>
    <td th:text="${livestock.id}" />
    <td th:text="${livestock.name}"/>
    <td th:text="${duepay.amount}" />
    <td><form >
  <script src="https://js.paystack.co/v1/inline.js"></script>
  <button type="button" id="hey" class="btnPayNow" data-email="${email}" data-mobile="${user.phonenumber}" data-amount="${duepay.amount}"
   onclick="payWithPaystack()"> Pay </button> 
</form>
    </td>
    </tr>
    </tbody>
    </table>
    </div>
    </div>
    </div>
        </div>
    </div>
    </section>
    <div th:insert="fragments/default.html :: appointment"> </div>
     <div th:insert="fragments/default.html :: footer"> </div> 
        <div th:insert="fragments/default.html :: copyright"> </div> 
         <div th:insert="fragments/default.html :: moveTop"> </div> 
         
         <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
 <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script type="text/javascript" src="../js/main.js"></script>

         <script type="text/javascript"  th:inline="javascript">
         
var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
(function(){
var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
s1.async=true;
s1.src='https://embed.tawk.to/5cec274ba667a0210d59ae62/default';
s1.charset='UTF-8';
s1.setAttribute('crossorigin','*');
s0.parentNode.insertBefore(s1,s0);
})();

//var data-email;

var userEmail = [[${user.email}]];
//var userPhone = [[${phone}]];
//var userEmail = [[${email}]];
//var data-email = $(input).attr("id");

  function payWithPaystack(){
	  alert(userEmail);
    var handler = PaystackPop.setup({
      key: 'pk_test_3ff500ca3f03fe6b46b53d7a279a56e78264b766',
      email: [[${user.email}]],
      amount: [[${duepay.amount}]]+"00",
      currency: "NGN",
      metadata: {
         custom_fields: [
            {
                display_name: "Mobile Number",
                variable_name: "mobile_number",
                value: [[${user.phonenumber}]]
            }
         ]
      },
      callback: function(response){
          alert('success. transaction ref is ' + response.reference);
      },
      onClose: function(){
      }
    });
    handler.openIframe();
  }
</script>
    </body>
</html>
    
    